<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Careers - Jayasan Infoware Pvt. Ltd.</title>
<link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>

<body>
<header>
  <div class="brand">
    <div class="logo-wrap">
      <img src="jayasanlogo2021-removebg-preview.png" alt="Jayasan logo" />
    </div>
    <p class="iso-text">An ISO Certified Company</p>
  </div>

  <nav class="desktop">
    <a href="index.html">Home</a>
    <a href="#about">About</a>
    <a href="#services">Services</a>
    <a href="#clients">Clients</a>
    <a href="#map">Presence</a>
    <a href="#contact">Contact</a>
  </nav>
</header>

<section class="form-section">
  <h2>Join Our Team</h2>

  <form id="jobForm">
    <label>Full Name*</label>
    <input type="text" name="user_name" required placeholder="Enter your full name" />

    <label>Email Address*</label>
    <input type="email" name="user_email" required placeholder="Enter your email" />

    <label>Phone Number*</label>
    <input type="tel" name="user_number" required placeholder="Enter your phone number" />

    <label>Position Applying For*</label>
    <select name="position" required>
      <option value="">Select a role</option>
      <option value="Help Desk">Help Desk</option>
      <option value="Network Engineer">Network Engineer</option>
      <option value="IT Support Engineer">IT Support Engineer</option>
      <option value="Printer Engineer">Printer Engineer</option>
    </select>

    <label>Upload Resume (PDF only)*</label>
    <input type="file" id="resumeFile" accept="application/pdf" required />

    <button class="cta" type="submit">Send Application</button>
  </form>

  <p id="successMsg" style="display:none;">✅ Application submitted successfully!</p>
</section>

<footer id="contact">
  <p><strong>Jayasan Infoware Pvt. Ltd.</strong> — Dehradun, Uttarakhand</p>
</footer>

<script>
const UPLOAD_URL = "https://script.google.com/macros/s/AKfycbx_O93z8x5pUQDeCKhV3T7rIUQFS25Anq-B0UVx1QyuRzF-6M5ooCRx3E69q9BnXNYOAQ/exec"; // your deployed URL

async function uploadFileToDrive(file) {
  const reader = new FileReader();

  return new Promise((resolve, reject) => {
    reader.onload = async () => {
      try {
        const base64 = reader.result; // data:application/pdf;base64,...
        const formData = new FormData();
        formData.append("file", base64);
        formData.append("filename", file.name);
        formData.append("mimetype", file.type);

        const response = await fetch(UPLOAD_URL, {
          method: "POST",
          body: formData,
        });

        const result = await response.json();
        if (!result.success) throw new Error(result.error || "Unknown error");
        resolve(result);
      } catch (err) {
        reject(err);
      }
    };
    reader.onerror = () => reject(reader.error);
    reader.readAsDataURL(file);
  });
}

// Example integration with your form
document.getElementById("resumeFile").addEventListener("change", async (e) => {
  const file = e.target.files[0];
  if (!file) return;

  try {
    const result = await uploadFileToDrive(file);
    console.log("✅ Uploaded:", result);
    alert("Uploaded " + result.fileName + " (" + (result.size/1024).toFixed(1) + " KB)");
  } catch (err) {
    console.error("❌ Upload failed:", err);
    alert("Upload failed: " + err.message);
  }
});
</script>
</body>
</html>
