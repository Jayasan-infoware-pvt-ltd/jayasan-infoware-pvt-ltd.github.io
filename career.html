<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Careers - Jayasan Infoware Pvt. Ltd.</title>
<link rel="stylesheet" href="styles.css">
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
</head>

<body>

<header>
  <div class="brand">
    <div class="logo-wrap">
      <img src="jayasanlogo2021-removebg-preview.png" alt="Jayasan logo" />
    </div>
    <p class="iso-text">An ISO Certified Company</p>
  </div>

  <!-- Desktop nav -->
  <nav class="desktop">
    <a href="index.html">Home</a>
    <a href="#about">About</a>
    <a href="#services">Services</a>
    <a href="#clients">Clients</a>
    <a href="#map">Presence</a>
    <a href="#contact">Contact</a>
  </nav>

  <!-- Hamburger -->
  <button class="hambutton" id="hambtn" aria-label="Menu">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
      <path d="M4 7h16M4 12h16M4 17h16" stroke="white" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </button>

  <!-- Drawer Menu -->
  <div class="mobile-drawer" id="mobileDrawer">
    <a href="index.html">Home</a>
    <a href="#about">About</a>
    <a href="#services">Services</a>
    <a href="#clients">Clients</a>
    <a href="#map">Presence</a>
    <a href="#contact">Contact</a>
  </div>
</header>

<!-- Form -->
<section class="form-section">
  <h2>Join Our Team</h2>
  <form id="jobForm">
    <label>Full Name*</label>
    <input type="text" name="user_name" required>

    <label>Email Address*</label>
    <input type="email" name="user_email" required>

    <label>Phone Number*</label>
    <input type="tel" name="user_number" required>

    <label>Position Applying For*</label>
    <select name="position" required>
      <option value="">Select a role</option>
      <option>Help Desk</option>
      <option>Network Engineer</option>
      <option>IT Support Engineer</option>
      <option>Printer Engineer</option>
    </select>

    <label>Upload Resume (PDF only)*</label>
    <input type="file" id="resumeFile" accept="application/pdf" required>

    <button class="cta" type="submit">Send Application</button>
  </form>
  <p id="successMsg" style="display:none;color:green;text-align:center;margin-top:10px;">
    âœ… Your application has been submitted successfully.
  </p>
</section>

<footer id="contact">
  <p><strong>Jayasan Infoware Pvt. Ltd.</strong> â€” Dehradun, Uttarakhand</p>
  <p>ðŸ“§ <a href="mailto:info@jayasaninfoware.com" style="color:#a7c4ff">info@jayasaninfoware.com</a> | ðŸ“ž +91-XXXXXXXXXX</p>
  <p>&copy; <span id="year2"></span> Jayasan Infoware Pvt. Ltd.</p>
</footer>

<script>
document.getElementById("year2").textContent = new Date().getFullYear();

emailjs.init("B9cRp5FtdvX1_JkvJ"); // your EmailJS key

// Drawer menu toggle
const hambtn = document.getElementById("hambtn");
const drawer = document.getElementById("mobileDrawer");
hambtn.addEventListener("click", () => {
  drawer.style.display = drawer.style.display === "flex" ? "none" : "flex";
});
drawer.querySelectorAll("a").forEach(a => a.addEventListener("click", ()=>drawer.style.display="none"));

// Job form submission
document.getElementById("jobForm").addEventListener("submit", async (e) => {
  e.preventDefault();
  const form = e.target;
  const file = document.getElementById("resumeFile").files[0];
  const btn = form.querySelector("button");
  const successMsg = document.getElementById("successMsg");

  if (!file) return alert("Please upload your resume first.");
  if (file.size > 5 * 1024 * 1024) return alert("File must be below 5MB.");

  btn.textContent = "Uploading...";
  btn.disabled = true;

  // Convert file to Base64 for Apps Script
  const base64 = await new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result.split(",")[1]);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });

  try {
    const uploadRes = await fetch("https://script.google.com/macros/s/AKfycbxLp9G24-_sBY6du94oezMDRl0pX5dwRjPrIJ4nRdEBJN0I6BlUIYToQ3xjqlBC8tWHlQ/exec", { // ðŸ”¹ Replace with your Apps Script URL
      method: "POST",
      body: new URLSearchParams({
        file: base64,
        filename: file.name,
        mimetype: file.type
      }),
    });
    const uploadJson = await uploadRes.json();
    if (!uploadJson.success) throw new Error(uploadJson.error);

    const fileUrl = uploadJson.fileUrl;

    // Send via EmailJS
    btn.textContent = "Sending...";
    await emailjs.send("service_fb7aklu", "template_1tvlztd", {
      user_name: form.user_name.value,
      user_email: form.user_email.value,
      user_number: form.user_number.value,
      position: form.position.value,
      resume_link: fileUrl,
    });

    successMsg.style.display = "block";
    form.reset();
  } catch (err) {
    alert("Error: " + err.message);
  } finally {
    btn.textContent = "Send Application";
    btn.disabled = false;
  }
});
</script>

</body>
</html>
